document.addEventListener("DOMContentLoaded", () => { let e = document.getElementById("main-header"), t = document.getElementById("main-nav"), i = document.querySelectorAll(".nav-link"), n = document.getElementById("indicator"), l = document.getElementById("mobile-menu-toggle"), o = document.querySelector(".logo-text"), s = {}, r = "home", c = window.innerWidth < 768, a = !1, $ = !1, d = {}, u = !1, m, f = "/" === window.location.pathname || "/index.html" === window.location.pathname || window.location.pathname.endsWith("/index.html"); function h() { b(), f ? (g("home"), v("home", !0)) : y(!0), a = !0 } function b() { f && document.querySelectorAll("section[id], .hero-section[id]").forEach(e => { let t = e.id, i = e.getBoundingClientRect(); d[t] = { top: i.top + window.scrollY, bottom: i.bottom + window.scrollY, height: i.height, middle: i.top + window.scrollY + i.height / 2 }, s[t] = e }) } function _() { if (!f) return null; let e = window.scrollY + window.innerHeight / 2, t = null, i = Number.POSITIVE_INFINITY; for (let n in d) { let { top: l, bottom: o } = d[n]; if (e >= l && e <= o) { t = n; break } let s = Math.abs(e - d[n].middle); s < i && (i = s, t = n) } if (!t) { let c = Object.keys(d); c.length > 0 && (window.scrollY < 10 ? t = c[0] : window.scrollY + window.innerHeight >= document.body.scrollHeight - 10 && (t = c[c.length - 1])) } return t || r } function g(e) { e === r || (i.forEach(t => { t.getAttribute("data-section") === e ? t.classList.add("active") : t.classList.remove("active") }), r = e, c || (f ? v(e) : y())) } function y(e = !1) { if (c) return; let i = t.getBoundingClientRect(), l = o.getBoundingClientRect(), s = l.left - i.left; e ? n.style.transition = "none" : n.style.transition = "transform 0.4s cubic-bezier(0.25, 0.1, 0.25, 1), width 0.4s cubic-bezier(0.25, 0.1, 0.25, 1), opacity 0.4s cubic-bezier(0.25, 0.1, 0.25, 1)", n.style.width = `${l.width}px`, n.style.transform = `translateX(${s}px)`, n.style.opacity = "1", e && (n.offsetWidth, n.style.transition = "transform 0.4s cubic-bezier(0.25, 0.1, 0.25, 1), width 0.4s cubic-bezier(0.25, 0.1, 0.25, 1), opacity 0.4s cubic-bezier(0.25, 0.1, 0.25, 1)") } function v(e, i = !1) { if (c) return; if (!f) { y(i); return } let l = document.querySelector(`.nav-link[data-section="${e}"]`); if (!l) return; let o = t.getBoundingClientRect(), s = l.getBoundingClientRect(), r = s.left - o.left; i ? n.style.transition = "none" : n.style.transition = "transform 0.4s cubic-bezier(0.25, 0.1, 0.25, 1), width 0.4s cubic-bezier(0.25, 0.1, 0.25, 1), opacity 0.4s cubic-bezier(0.25, 0.1, 0.25, 1)", n.style.width = `${s.width}px`, n.style.transform = `translateX(${r}px)`, n.style.opacity = "1", i && (n.offsetWidth, n.style.transition = "transform 0.4s cubic-bezier(0.25, 0.1, 0.25, 1), width 0.4s cubic-bezier(0.25, 0.1, 0.25, 1), opacity 0.4s cubic-bezier(0.25, 0.1, 0.25, 1)") } function p() { f && !$ && (window.requestAnimationFrame(() => { if (u) { $ = !1; return } let e = _(); e && e !== r && g(e), $ = !1 }), $ = !0) } function L() { let i = c, n = window.innerWidth < 768; if (i !== n && !(c = n) && t.classList.contains("active")) { t.classList.remove("active"), l.classList.remove("active"), e.classList.remove("mobile-menu-open"); let o = document.querySelector(".menu-blur-overlay"); o.classList.remove("active") } b(), c || (f ? v(r, !0) : y(!0)) } function E() { t.classList.toggle("active"), l.classList.toggle("active"), e.classList.toggle("mobile-menu-open"); let i = document.querySelector(".menu-blur-overlay"); e.classList.contains("mobile-menu-open") ? i.classList.add("active") : i.classList.remove("active") } function z(i) { if (!f) return; let n = s[i]; if (!n) return; m && clearTimeout(m), u = !0, g(i); let l = d[i].top - e.offsetHeight; window.scrollTo({ top: l, behavior: "smooth" }), c && t.classList.contains("active") && E(), m = setTimeout(() => { u = !1 }, 800) } window.addEventListener("scroll", p, { passive: !0 }); let B; window.addEventListener("resize", () => { clearTimeout(B), B = setTimeout(L, 100) }), i.forEach(e => { e.addEventListener("click", t => { t.preventDefault(); let i = e.getAttribute("data-section"); f ? z(i) : window.location.href = `/index.html#${i}` }) }), l.addEventListener("click", E), h(), window.addEventListener("load", () => { b(), f ? v(r, !0) : y(!0) }) });